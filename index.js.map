{"version":3,"file":"index.js","sources":["../src/js/helpers.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const galleryList = document.querySelector('.js-gallery');\nexport const loader = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '51361709-3ae7eddc83ad637b7c3fc8345';\nexport const perPage = 15;\n\nexport const defaultParams = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: perPage,\n};\n\nexport function clearGallery() {\n  galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.replace('hidden', 'load-more-btn');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('load-more-btn', 'hidden');\n}\n\nlet lightbox = null;\n\nexport function refreshLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.js-gallery a', {\n      captionsData: 'alt',\n      captionDelay: 500,\n      doubleTapZoom: 1.2,\n      maxZoom: 4,\n      disableScroll: true,\n    });\n  }\n}\n\nexport function checkLoadMoreButton(currentPage, totalPages) {\n  if (currentPage >= totalPages) {\n    hideLoadMoreButton();\n    iziToast.warning({\n      title: '⚠️ Warning',\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n      timeout: 4000,\n    });\n  } else {\n    showLoadMoreButton();\n  }\n}\n","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { BASE_URL, API_KEY, defaultParams } from './helpers';\n\nexport async function getImagesByQuery(query, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    page,\n    ...defaultParams,\n  });\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Ooops! Somethings went wrong`,\n      position: 'topRight',\n      timeout: 4000,\n    });\n  }\n}\n","import { refreshLightbox, galleryList } from './helpers';\n\nexport function createGallery(images) {\n  const markup = images\n    .map(({ largeImageURL, webformatURL, tags, ...rest }) => {\n      const trimmedTags = tags\n        .split(',')\n        .map(tag => tag.trim())\n        .slice(0, 3)\n        .join(',');\n      const infoItems = ['Likes', 'Views', 'Comments', 'Downloads']\n        .map(\n          item => `\n            <li class=\"images-info-item\">\n              <h3 class=\"images-info-subtitle\">${item}</h3>\n              <p class=\"images-info-value\">${rest[item.toLowerCase()]}</p>\n            </li>`\n        )\n        .join('');\n      return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${trimmedTags}\" />\n            <ul class=\"images-info-list\">${infoItems}</ul>\n          </a>\n        </li>`;\n    })\n    .join('');\n  galleryList.insertAdjacentHTML('beforeend', markup);\n  refreshLightbox();\n  }\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\nimport {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  perPage,\n  checkLoadMoreButton,\n  loadMoreBtn\n} from './js/helpers';\n\nlet currentPage = 1;\nlet totalPages = 0;\nlet query = '';\n\nconst searchForm = document.querySelector('.js-form');\n\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nexport async function handleSubmit(event) {\n  event.preventDefault();\n\n  const inputText = searchForm.elements['search-text'];\n  query = inputText.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'field must not be empty',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, (currentPage = 1));\n    if (!data.hits.length) {\n      iziToast.warning({\n        title: '⚠️ Warning',\n        message: `Sorry, there are no images matching your \"${query}\". Please try again!`,\n        position: 'topRight',\n        timeout: 4000,\n      });\n      return;\n    }\n    totalPages = Math.ceil(data.totalHits / perPage);\n    createGallery(data.hits);\n    checkLoadMoreButton(currentPage, totalPages);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    searchForm.reset();\n    hideLoader();\n  }\n}\n\nexport async function handleLoadMore() {\n  currentPage++;\n  hideLoadMoreButton();\n  showLoader();\n  try {\n    const data = await getImagesByQuery(query, currentPage);\n    createGallery(data.hits);\n    let galleryListItem = document.querySelector('.gallery-item');\n    let hightItem = galleryListItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: hightItem * 2 + 40,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    checkLoadMoreButton(currentPage, totalPages);\n    hideLoader();\n  }\n}\n"],"names":["galleryList","loader","loadMoreBtn","BASE_URL","API_KEY","perPage","defaultParams","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","lightbox","refreshLightbox","SimpleLightbox","checkLoadMoreButton","currentPage","totalPages","iziToast","getImagesByQuery","query","page","params","axios","createGallery","images","markup","largeImageURL","webformatURL","tags","rest","trimmedTags","tag","infoItems","item","searchForm","handleSubmit","handleLoadMore","event","data","error","hightItem"],"mappings":"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"}